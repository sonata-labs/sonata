syntax = "proto3";

package api.v1;

import "cometbft/abci/v1/types.proto";
import "cometbft/types/v1/block.proto";
import "cometbft/types/v1/types.proto";

option go_package = "github.com/sonata-labs/sonata/gen/api/v1";

service Chain {
  rpc GetBlock(GetBlockRequest) returns (GetBlockResponse) {}
  rpc GetTransaction(GetTransactionRequest) returns (GetTransactionResponse) {}
  rpc SendTransaction(SendTransactionRequest) returns (SendTransactionResponse) {}
}

message GetBlockRequest {
  int64 height = 1;
}

message GetBlockResponse {
  cometbft.types.v1.Block block = 1;
  cometbft.types.v1.BlockMeta block_meta = 2;
}

message GetTransactionRequest {
  string tx_hash = 1;
  bool prove = 2;
}

message GetTransactionResponse {
  string tx_hash = 1;
  int64 height = 2;
  uint32 index = 3;
  cometbft.abci.v1.ExecTxResult tx_result = 4;
  bytes tx = 5;
  cometbft.types.v1.TxProof proof = 6;
}

message SendTransactionRequest {}

message SendTransactionResponse {}
